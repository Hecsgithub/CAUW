webpackJsonp([6],{"5VkX":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("mvHQ"),i=o.n(r),n={name:"DroDormitory",created:function(){this.getAllMajor()},mounted:function(){this.getalldormitory()},methods:{getalldormitory:function(){var e=this;this.dormitoryLoading=!0,this.postRequest("/dormitory/alldormitory/getallDormitory",{majorId:this.ddmcForm.majorId,classId:this.ddmcForm.classId,dong:this.ddmcForm.dong,floor:this.ddmcForm.floor,sex:this.ddmcForm.sex,number:this.ddmcForm.number,enough:this.ddmcForm.enough}).then(function(t){if(t&&200==t.status){var o=t.data;console.info(i()(o)),e.dormitoryList=o,e.dormitoryLoading=!1}})},majorChange:function(e){var t=this;this.classList=[],this.postRequest("/dormitory/alldormitory/getClassByMajorId",{majorId:this.ddmcForm.majorId}).then(function(e){if(e&&200==e.status){var o=e.data;t.classList=o,console.info("班级信息"+i()(t.classList))}})},handleSizeChange:function(e){this.pagesize=e,console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage)},indexMethod:function(e){return e+1},selectChange:function(e){this.selectList=e},handleDeleteList:function(){for(var e=this,t=this.selectList.length,o="",r=0;r<t;r++)o+=this.selectList[r].id+",";o=o.substring(0,o.length-1),console.info(o),this.$confirm("确认删除该宿舍信息吗?","提示",{type:"warning"}).then(function(){e.postRequest("/dormitory/alldormitory/deleteDormitory",{id:o}).then(function(t){t&&200==t.status&&(e.selectList=[],e.getalldormitory())})}).catch(function(){})},handleAdd:function(){this.addandeditFromVisible=!0},handleEdit:function(e,t){this.addandeditFromVisible=!0,this.addandeditFromType="edit",this.addandeditFrom.id=t.id,this.addandeditFrom.dong=t.dong,this.addandeditFrom.floor=t.floor,this.addandeditFrom.room=t.room,this.addandeditFrom.sex=t.sex,this.addandeditFrom.number=t.number,this.addandeditFrom.rent=t.rent},addeditSubmit:function(){var e=this;"edit"==this.addandeditFromType?this.postRequest("/dormitory/alldormitory/updatetDormitory",{id:this.addandeditFrom.id,dong:this.addandeditFrom.dong,floor:this.addandeditFrom.floor,room:this.addandeditFrom.room,sex:this.addandeditFrom.sex,number:this.addandeditFrom.number,rent:this.addandeditFrom.rent}).then(function(t){t&&200==t.status&&e.getalldormitory()}):this.postRequest("/dormitory/alldormitory/insertDormitory",{dong:this.addandeditFrom.dong,floor:this.addandeditFrom.floor,room:this.addandeditFrom.room,sex:this.addandeditFrom.sex,number:this.addandeditFrom.number,rent:this.addandeditFrom.rent}).then(function(t){t&&200==t.status&&e.getalldormitory()})},getstudent:function(e){var t=this;this.dormitoryShowInfoLoading=!0,this.dormitoryShowInfoVisible=!0;var o=this;this.postRequest("/dormitory/alldormitory/getStudentByDormitoryId",{dormitoryId:e.id}).then(function(e){if(e&&200==e.status){console.info(i()(e.data)),o.dormitoryShowInfoLoading=!1;var r=e.data[0],n="";if(r.length>0)for(var a=0;a<r.length;a++)n+=r[a].m.name+r[a].name+"、";n=n.substring(0,n.length-1),t.dormitoryClass=n,t.dormitoryStudent=e.data[1],console.info(i()(e.data[0])+i()(e.data[1]))}})},getAllMajor:function(){var e=this;this.postRequest("/dormitory/alldormitory/getAllMajor",{}).then(function(t){t&&200==t.status&&(e.majorList=t.data)})}},data:function(){return{ddmcForm:{majorId:"",classId:"",dong:"",floor:0,sex:"",number:0,enough:""},dormitoryList:[],dormitoryLoading:!1,classList:[],majorList:[],sexOptions:[{value:"男",label:"男"},{value:"女",label:"女"}],numberOptions:[{label:"2人间",value:2},{label:"3人间",value:3},{label:"4人间",value:4},{label:"5人间",value:5}],enoughOptions:[{value:"1",label:"已安排班级"},{value:"0",label:"未安排班级"}],selectList:[],currentPage:1,pagesize:10,formatnumber:function(e,t){return 2==e.number?"2人间":3==e.number?"3人间":4==e.number?"4人间":5==e.number?"5人间":"未知"},addandeditFromVisible:!1,addandeditFrom:{id:"",dong:"",floor:0,room:0,sex:"",number:0,rent:0},addandeditFromType:"",dormitoryStudent:[],dormitoryClass:"",dormitoryShowInfoLoading:!1,dormitoryShowInfoVisible:!1}}},a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container"},[o("div",{staticClass:"table"},[o("div",{},[o("el-row",[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"divbuju",staticStyle:{height:"610px"}},[o("el-form",{attrs:{inline:!0,model:e.ddmcForm}},[o("el-form-item",{staticStyle:{width:"100%"}},[e._v("\n                    专业：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},on:{change:e.majorChange},model:{value:e.ddmcForm.majorId,callback:function(t){e.$set(e.ddmcForm,"majorId",t)},expression:"ddmcForm.majorId"}},e._l(e.majorList,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.majorId}})}),1)],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[e._v("\n                    班级：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.ddmcForm.classId,callback:function(t){e.$set(e.ddmcForm,"classId",t)},expression:"ddmcForm.classId"}},e._l(e.classList,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.classId}})}),1)],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[e._v("\n                    栋：\n                    "),o("el-input",{staticStyle:{width:"150px",heght:"30px"},attrs:{placeholder:"楼栋编号",size:"mini"},model:{value:e.ddmcForm.dong,callback:function(t){e.$set(e.ddmcForm,"dong",t)},expression:"ddmcForm.dong"}})],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[e._v("\n                    层：\n                    "),o("el-input",{staticStyle:{width:"150px",heght:"30px"},attrs:{placeholder:"楼层数",size:"mini"},model:{value:e.ddmcForm.floor,callback:function(t){e.$set(e.ddmcForm,"floor",e._n(t))},expression:"ddmcForm.floor"}})],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[e._v("\n                    性别：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.ddmcForm.sex,callback:function(t){e.$set(e.ddmcForm,"sex",t)},expression:"ddmcForm.sex"}},e._l(e.sexOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[e._v("\n                    几人间：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.ddmcForm.number,callback:function(t){e.$set(e.ddmcForm,"number",t)},expression:"ddmcForm.number"}},e._l(e.numberOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[e._v("\n                    宿舍类型：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.ddmcForm.enough,callback:function(t){e.$set(e.ddmcForm,"enough",t)},expression:"ddmcForm.enough"}},e._l(e.enoughOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[o("el-button",{staticStyle:{width:"250px"},attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.getalldormitory()}}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),o("el-col",{attrs:{span:18}},[o("div",{staticClass:"divbuju"},[o("el-row",[o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple"},[o("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",round:""},on:{click:e.handleAdd}},[e._v("新增\n                        ")])],1)]),e._v(" "),o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple-light"},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:e.handleDeleteList}},[e._v("删除")])],1)])],1),e._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dormitoryLoading,expression:"dormitoryLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:e.dormitoryList.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":e.selectChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong"}}),e._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor"}}),e._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room"}}),e._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex"}}),e._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:e.formatnumber,sortable:""}}),e._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return e.getstudent(t.row)}}},[e._v("查看详情")])]}}])})],1)],e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dormitoryList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)])],1)],1)]),e._v(" "),o("el-dialog",{attrs:{title:"新增or修改",visible:e.addandeditFromVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addandeditFromVisible=t}}},[o("el-form",{ref:"addandeditFrom",attrs:{model:e.addandeditFrom,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"栋",prop:"dong"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addandeditFrom.dong,callback:function(t){e.$set(e.addandeditFrom,"dong",t)},expression:"addandeditFrom.dong"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"层",prop:"floor"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addandeditFrom.floor,callback:function(t){e.$set(e.addandeditFrom,"floor",e._n(t))},expression:"addandeditFrom.floor"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"房间",prop:"room"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addandeditFrom.room,callback:function(t){e.$set(e.addandeditFrom,"room",e._n(t))},expression:"addandeditFrom.room"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"sex"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.addandeditFrom.sex,callback:function(t){e.$set(e.addandeditFrom,"sex",t)},expression:"addandeditFrom.sex"}},e._l(e.sexOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"几人间",prop:"number"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.addandeditFrom.number,callback:function(t){e.$set(e.addandeditFrom,"number",t)},expression:"addandeditFrom.number"}},e._l(e.numberOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"租金/人/年",prop:"rent"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addandeditFrom.rent,callback:function(t){e.$set(e.addandeditFrom,"rent",e._n(t))},expression:"addandeditFrom.rent"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addandeditFromVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addeditSubmit}},[e._v("提交")])],1)],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],attrs:{title:"学生名单",visible:e.dormitoryShowInfoVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dormitoryShowInfoVisible=t}}},[o("div",[e._v("\n      班级："+e._s(e.dormitoryClass)+"\n      "),o("div",[[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:e.dormitoryStudent,size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[o("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"sb.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"初始学号",prop:"studentId"}}),e._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sb.sex"}}),e._v(" "),o("el-table-column",{attrs:{label:"手机号码",prop:"sb.phone"}}),e._v(" "),o("el-table-column",{attrs:{label:"邮箱",prop:"sb.email"}})],1)]],2)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dormitoryShowInfoVisible=!1}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var l=o("VU/8")(n,a,!1,function(e){o("EWuk")},"data-v-e395591e",null);t.default=l.exports},ADxf:function(e,t){},Dgql:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("mvHQ"),i=o.n(r),n={name:"DorDivideDormitory",created:function(){this.initTreeData()},methods:{initTreeData:function(){var e=this;this.postRequest("/dormitory/dividedormitory/initTreeData",{}).then(function(t){if(t&&200==t.status){var o=t.data;e.treeData=o,console.info("树"+i()(e.treeData))}})},showdormitory:function(e){var t=this;console.info(e.data),null!=e.data.classId&&(this.classId=e.data.classId,this.grade=e.data.grade,this.dormitoryLoading=!0,this.postRequest("/dormitory/dividedormitory/getallDormitory",{classId:e.data.classId}).then(function(e){if(e&&200==e.status){var o=e.data;console.info(i()(o)),t.dormitoryList=o[0],t.classInfo=o[1],t.dormitoryLoading=!1,console.info(i()(t.classInfo))}}))},handleSizeChange:function(e){this.pagesize=e,console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage)},indexMethod:function(e){return e+1},boyhandleSizeChange:function(e){this.boypagesize=e,console.log(this.boypagesize)},boyhandleCurrentChange:function(e){this.boycurrentPage=e,console.log(this.boycurrentPage)},girlhandleSizeChange:function(e){this.girlpagesize=e,console.log(this.girlpagesize)},girlhandleCurrentChange:function(e){this.girlcurrentPage=e,console.log(this.girlcurrentPage)},selectChange:function(e){this.selectList=e},blessselectChange:function(e){this.blessselectList=e},bhandleDeleteList:function(){for(var e=this,t=this.blessselectList.length,o="",r=0;r<t;r++)o+=this.blessselectList[r].id+",";""!=(o=o.substring(0,o.length-1))&&(console.info(o),this.$confirm("确认删除这宿舍信息吗?这些同学将无宿舍分配哦！请尽快分配！","提示",{type:"warning"}).then(function(){e.postRequest("dormitory/dividedormitory/deletelistDormitoryAllocation",{id:o}).then(function(t){t&&200==t.status&&(e.bselectList=[],e.handleAdd())})}).catch(function(){}))},glessselectChange:function(e){this.glessselectList=e},ghandleDeleteList:function(){for(var e=this,t=this.glessselectList.length,o="",r=0;r<t;r++)o+=this.glessselectList[r].id+",";""!=(o=o.substring(0,o.length-1))&&(console.info(o),this.$confirm("确认删除这宿舍信息吗?这些同学将无宿舍分配哦！请尽快分配！","提示",{type:"warning"}).then(function(){e.postRequest("dormitory/dividedormitory/deletelistDormitoryAllocation",{id:o}).then(function(t){t&&200==t.status&&(e.gselectList=[],e.handleAdd())})}).catch(function(){}))},gneedselectChange:function(e){this.gneedselectList=e},bneedselectChange:function(e){this.bneedselectList=e},handleDeleteList:function(){for(var e=this,t=this.selectList.length,o="",r=0;r<t;r++)o+=this.selectList[r].id+",";""!=(o=o.substring(0,o.length-1))&&(console.info(o),this.$confirm("确认删除这宿舍信息吗?这些同学将无宿舍分配哦！请尽快分配！","提示",{type:"warning"}).then(function(){e.postRequest("dormitory/dividedormitory/deletelistDormitoryAllocation",{id:o}).then(function(t){t&&200==t.status&&(e.selectList=[],e.getalldormitory())})}).catch(function(){}))},getstudent:function(e){var t=this;this.dormitoryShowInfoLoading=!0,this.dormitoryShowInfoVisible=!0;var o=this;this.postRequest("/dormitory/alldormitory/getStudentByDormitoryId",{dormitoryId:e.id}).then(function(e){if(e&&200==e.status){console.info(i()(e.data)),o.dormitoryShowInfoLoading=!1;var r=e.data[0],n="";if(r.length>0)for(var a=0;a<r.length;a++)n+=r[a].m.name+r[a].name+"、";n=n.substring(0,n.length-1),t.dormitoryClass=n,t.dormitoryStudent=e.data[1],console.info(i()(e.data[0])+i()(e.data[1]))}})},
//!!!!!!!!!!!!!!!!!!!自动分配宿舍
dividedormitory:function(){var e=this;this.$confirm("确认自动分配宿舍到班级吗?","提示",{type:"warning"}).then(function(){e.postRequest("/dormitory/alldormitory/dividedormitory",{}).then(function(e){e&&e.status})}).catch(function(){})},handleAdd:function(){var e=this;this.addDormitoryforClassFromLoading=!0,this.addDormitoryforClassFromVisible=!0,this.postRequest("/dormitory/dividedormitory/getIinsufficientDormitory",{}).then(function(t){t&&200==t.status&&(e.boyinsufficientDormitory=t.data[0],e.girlinsufficientDormitory=t.data[1],console.info(i()(t.data)),e.getIinsufficientClassDormitory(),e.addDormitoryforClassFromLoading=!1)})},getIinsufficientClassDormitory:function(){var e=this;this.postRequest("/dormitory/dividedormitory/getIinsufficientClassDormitory",{}).then(function(t){t&&200==t.status&&(e.bclassdormitort=t.data[0],e.gclassdormitort=t.data[1],console.info(i()(e.bclassdormitort)),console.info(i()(e.gclassdormitort)),console.info(i()(t.data)))})},boyneedhandleSizeChange:function(e){this.boyneedpagesize=e,console.log(this.boyneedpagesize)},boyneedhandleCurrentChange:function(e){this.boyneedcurrentPage=e,console.log(this.boyneedcurrentPage)},girlneedhandleSizeChange:function(e){this.girlneedpagesize=e,console.log(this.girlneedpagesize)},girlneedhandleCurrentChange:function(e){this.girlneedcurrentPage=e,console.log(this.girlneedcurrentPage)},badddormitory:function(e){for(var t=this,o=this.bneedselectList.length,r="",n=0;n<o;n++)r+=this.bneedselectList[n].c.m.name+this.bneedselectList[n].c.name+":"+this.bneedselectList[n].c.classId+":"+this.bneedselectList[n].boylessnumber+",";if(r=r.substring(0,r.length-1),console.info(r+i()(this.bneedselectList)),""!=r){var a=e.number-e.hasnumber;this.$confirm("该宿舍最多再容纳"+a+"人，请确认是否添加新生","提示",{type:"warning"}).then(function(){t.postRequest("dormitory/dividedormitory/addDormitoryAllocation",{id:e.id,dong:e.dong,floor:e.floor,room:e.room,sex:e.sex,number:e.number,rent:e.rent,hasnumber:e.hasnumber,daid:r}).then(function(e){e&&200==e.status&&(t.bneedselectList=[],t.handleAdd())})}).catch(function(){})}else this.$message({message:"请先从右侧列表中选择要加入的班级学生",type:"error"})},gadddormitory:function(e){for(var t=this,o=this.gneedselectList.length,r="",i=0;i<o;i++)r+=this.gneedselectList[i].c.m.name+this.gneedselectList[i].c.name+":"+this.gneedselectList[i].c.classId+":"+this.gneedselectList[i].girllessnumber+",";if(r=r.substring(0,r.length-1),console.info(r),""!=r){var n=e.number-e.hasnumber;this.$confirm("该宿舍最多再容纳"+n+"人，请确认是否添加新生","提示",{type:"warning"}).then(function(){t.postRequest("dormitory/dividedormitory/addDormitoryAllocation",{id:e.id,dong:e.dong,floor:e.floor,room:e.room,sex:e.sex,number:e.number,rent:e.rent,hasnumber:e.hasnumber,daid:r}).then(function(e){e&&200==e.status&&(t.gneedselectList=[],t.handleAdd())})}).catch(function(){})}else this.$message({message:"请先从右侧列表中选择要加入的班级学生",type:"error"})},gaddnewDormitory:function(){var e=this;if(0!==this.gclassdormitort.length){var t="以下新生都会被安排到新的宿舍";0!==this.girlinsufficientDormitory.length&&(t="还有未满员的宿舍！确定安排新宿舍吗?"+t),this.$confirm(t,"提示",{type:"warning"}).then(function(){for(var t=e.gclassdormitort.length,o="",r=0;r<t;r++)o+=e.gclassdormitort[r].c.m.name+e.gclassdormitort[r].c.name+":"+e.gclassdormitort[r].c.classId+":"+e.gclassdormitort[r].girllessnumber+",";o=o.substring(0,o.length-1),console.info(o),e.postRequest("dormitory/dividedormitory/addNewDormitoryAllocation",{info:o,sex:"女"}).then(function(t){e.gneedselectList=[],e.handleAdd()})}).catch(function(){})}else this.$message({message:"暂无需要宿舍的学生！不需要安排新宿舍！",type:"error"})},baddnewDormitory:function(){var e=this;if(0!==this.bclassdormitort.length){var t="以下新生都会被安排到新的宿舍";0!==this.boyinsufficientDormitory.length&&(t="还有未满员的宿舍！确定安排新宿舍吗?"+t),this.$confirm(t,"提示",{type:"warning"}).then(function(){for(var t=e.bclassdormitort.length,o="",r=0;r<t;r++)o+=e.bclassdormitort[r].c.m.name+e.bclassdormitort[r].c.name+":"+e.bclassdormitort[r].c.classId+":"+e.bclassdormitort[r].boylessnumber+",";o=o.substring(0,o.length-1),console.info(o),e.postRequest("dormitory/dividedormitory/addNewDormitoryAllocation",{info:o,sex:"男"}).then(function(t){e.bneedselectList=[],e.handleAdd()})}).catch(function(){})}else this.$message({message:"暂无需要宿舍的学生！不需要安排新宿舍！",type:"error"})}},data:function(){return{treeData:[],defaultProps:{children:"children",label:"name"},dormitoryList:[],dormitoryLoading:!1,classInfo:{majorname:"",majorId:"",classId:"",classname:"",boynumber:"",girlnumber:"",boydormitorynumber:"",girldormitorynumber:""},grade:"",selectList:[],currentPage:1,pagesize:10,formatnumber:function(e,t){return 2==e.number?"2人间":3==e.number?"3人间":4==e.number?"4人间":5==e.number?"5人间":"未知"},dormitoryStudent:[],dormitoryClass:"",dormitoryShowInfoLoading:!1,dormitoryShowInfoVisible:!1,classId:"",addDormitoryforClassFromLoading:!1,addDormitoryforClassFromVisible:!1,boyinsufficientDormitory:[],girlinsufficientDormitory:[],blessselectList:[],glessselectList:[],bclassdormitort:[],gclassdormitort:[],bneedselectList:[],gneedselectList:[],boycurrentPage:1,boypagesize:5,girlcurrentPage:1,girlpagesize:5,boyneedcurrentPage:1,boyneedpagesize:5,girlneedcurrentPage:1,girlneedpagesize:5}}},a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container"},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",size:"mini",round:""},on:{click:e.dividedormitory}},[e._v("分配宿舍\n          ")])],1),e._v(" "),o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple"},[o("el-button",{attrs:{type:"success",icon:"el-icon-crop",size:"mini",round:""},on:{click:e.handleAdd}},[e._v("调整未满员宿舍")])],1)])],1),e._v(" "),o("el-tree",{staticStyle:{"margin-left":"20%"},attrs:{data:e.treeData,props:e.defaultProps,accordion:"","node-key":"id","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return t.data,o("span",{staticClass:"custom-tree-node"},[o("span",[o("i",{on:{click:function(t){return e.showdormitory(r)}}},[e._v(e._s(r.label))])])])}}])})],1),e._v(" "),o("el-col",{attrs:{span:16}},[""!=e.classInfo.majorname?o("div",[o("el-row",{attrs:{gutter:20}},[o("el-col",[e._v("\n          "+e._s(e.classInfo.majorname)+"专业："+e._s(e.classInfo.classname)+"\n        ")])],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[e._v("\n          班级男生人数："+e._s(e.classInfo.boynumber)+"\n        ")]),e._v(" "),o("el-col",{attrs:{span:12}},[e._v("\n          已分配到的宿舍床位数："+e._s(e.classInfo.boydormitorynumber)+"\n        ")])],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[e._v("\n          班级女生人数："+e._s(e.classInfo.girlnumber)+"\n        ")]),e._v(" "),o("el-col",{attrs:{span:12}},[e._v("\n          已分配到的宿舍床位数："+e._s(e.classInfo.girldormitorynumber)+"\n        ")])],1)],1):e._e(),e._v(" "),o("el-row",[o("el-col",[o("el-row",[o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple-light"},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:e.handleDeleteList}},[e._v("删除\n                ")])],1)])],1),e._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dormitoryLoading,expression:"dormitoryLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:e.dormitoryList.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":e.selectChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong"}}),e._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor"}}),e._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room"}}),e._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex"}}),e._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:e.formatnumber,sortable:""}}),e._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return e.getstudent(t.row)}}},[e._v("查看详情")])]}}])})],1)],e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dormitoryList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)],1)],1)],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],attrs:{title:"学生名单",visible:e.dormitoryShowInfoVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dormitoryShowInfoVisible=t}}},[o("div",[e._v("\n      班级："+e._s(e.dormitoryClass)+"\n      "),o("div",[[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:e.dormitoryStudent,size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[o("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"sb.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"初始学号",prop:"studentId"}}),e._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sb.sex"}}),e._v(" "),o("el-table-column",{attrs:{label:"手机号码",prop:"sb.phone"}}),e._v(" "),o("el-table-column",{attrs:{label:"邮箱",prop:"sb.email"}})],1)]],2)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dormitoryShowInfoVisible=!1}}},[e._v("确定")])],1)]),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],attrs:{title:"调整宿舍",width:"80%",visible:e.addDormitoryforClassFromVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addDormitoryforClassFromVisible=t}}},[o("div",[o("div",[o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"男生未满员宿舍管理"}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:e.bhandleDeleteList}},[e._v("解散宿舍\n                ")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:16}},[[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:e.boyinsufficientDormitory.slice((e.boycurrentPage-1)*e.boypagesize,e.boycurrentPage*e.boypagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":e.blessselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),o("el-table-column",{attrs:{type:"index",index:e.indexMethod,width:"35"}}),e._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong",sortable:"",width:"70"}}),e._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor",sortable:"",width:"70"}}),e._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room",sortable:"",width:"70"}}),e._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:e.formatnumber,sortable:"",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{label:"已分配",prop:"hasnumber",sortable:"",width:"90"}}),e._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent",width:"90"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return e.getstudent(t.row)}}},[e._v("查看详情")]),e._v(" "),o("el-button",{attrs:{type:"success",size:"small"},on:{click:function(o){return e.badddormitory(t.row)}}},[e._v("选择班级")])]}}])})],1)],e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("el-pagination",{attrs:{"current-page":e.boycurrentPage,"page-sizes":[5,10,20,40],"page-size":e.boypagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.boyinsufficientDormitory.length},on:{"size-change":e.boyhandleSizeChange,"current-change":e.boyhandleCurrentChange}})],2),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini",round:""},on:{click:e.baddnewDormitory}},[e._v("分配新宿舍\n                    ")])],1)],1),e._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable1",staticClass:"el-tb-edit mgt20",attrs:{data:e.bclassdormitort.slice((e.boyneedcurrentPage-1)*e.boyneedpagesize,e.boyneedcurrentPage*e.boyneedpagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":e.bneedselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"缺少床位",prop:"boylessnumber",sortable:""}})],1)],e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("el-pagination",{attrs:{"current-page":e.boyneedcurrentPage,"page-sizes":[5,10,20,40],"page-size":e.boyneedpagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.bclassdormitort.length},on:{"size-change":e.boyneedhandleSizeChange,"current-change":e.boyneedhandleCurrentChange}})],2)],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"女生未满员宿舍管理"}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:e.ghandleDeleteList}},[e._v("解散宿舍\n                ")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:16}},[[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:e.girlinsufficientDormitory.slice((e.girlcurrentPage-1)*e.girlpagesize,e.girlcurrentPage*e.girlpagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":e.glessselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),o("el-table-column",{attrs:{type:"index",index:e.indexMethod,width:"35"}}),e._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong",sortable:"",width:"70px"}}),e._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor",sortable:"",width:"70px"}}),e._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room",sortable:"",width:"70px"}}),e._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex",width:"50px"}}),e._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:e.formatnumber,sortable:"",width:"100px"}}),e._v(" "),o("el-table-column",{attrs:{label:"已分配）",prop:"hasnumber",sortable:"",width:"100px"}}),e._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent",width:"90px"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return e.getstudent(t.row)}}},[e._v("查看详情")]),e._v(" "),o("el-button",{attrs:{type:"success",size:"small"},on:{click:function(o){return e.gadddormitory(t.row)}}},[e._v("选择班级")])]}}])})],1)],e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("el-pagination",{attrs:{"current-page":e.girlcurrentPage,"page-sizes":[5,10,20,40],"page-size":e.girlpagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.girlinsufficientDormitory.length},on:{"size-change":e.girlhandleSizeChange,"current-change":e.girlhandleCurrentChange}})],2),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini",round:""},on:{click:e.gaddnewDormitory}},[e._v("分配新宿舍\n                    ")])],1)],1),e._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable1",staticClass:"el-tb-edit mgt20",attrs:{data:e.gclassdormitort.slice((e.girlneedcurrentPage-1)*e.girlneedpagesize,e.girlneedcurrentPage*e.girlneedpagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":e.gneedselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),e._v(" "),o("el-table-column",{attrs:{label:"缺少床位",prop:"girllessnumber",sortable:""}})],1)],e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("el-pagination",{attrs:{"current-page":e.girlneedcurrentPage,"page-sizes":[5,10,20,40],"page-size":e.girlneedpagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.gclassdormitort.length},on:{"size-change":e.girlneedhandleSizeChange,"current-change":e.girlneedhandleCurrentChange}})],2)],1)],1)],1)],1)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addDormitoryforClassFromVisible=!1}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var l=o("VU/8")(n,a,!1,function(e){o("ADxf")},"data-v-0289275f",null);t.default=l.exports},EWuk:function(e,t){},uSqL:function(e,t,o){var r={"./DorDivideDormitory.vue":"Dgql","./DorDormitory.vue":"5VkX"};function i(e){return o(n(e))}function n(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(r)},i.resolve=n,e.exports=i,i.id="uSqL"}});
//# sourceMappingURL=6.7afeed8b63fbb374df62.js.map