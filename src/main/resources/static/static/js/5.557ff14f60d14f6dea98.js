webpackJsonp([5],{"5VkX":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("mvHQ"),r=o.n(i),n={name:"DroDormitory",created:function(){this.getAllMajor()},mounted:function(){this.getalldormitory()},methods:{getalldormitory:function(){var t=this;this.dormitoryLoading=!0,this.postRequest("/dormitory/alldormitory/getallDormitory",{majorId:this.ddmcForm.majorId,classId:this.ddmcForm.classId,dong:this.ddmcForm.dong,floor:this.ddmcForm.floor,sex:this.ddmcForm.sex,number:this.ddmcForm.number,enough:this.ddmcForm.enough}).then(function(e){if(e&&200==e.status){var o=e.data;console.info(r()(o)),t.dormitoryList=o,t.dormitoryLoading=!1}})},majorChange:function(t){var e=this;this.classList=[],this.postRequest("/dormitory/alldormitory/getClassByMajorId",{majorId:this.ddmcForm.majorId}).then(function(t){if(t&&200==t.status){var o=t.data;e.classList=o,console.info("班级信息"+r()(e.classList))}})},handleSizeChange:function(t){this.pagesize=t,console.log(this.pagesize)},handleCurrentChange:function(t){this.currentPage=t,console.log(this.currentPage)},indexMethod:function(t){return t+1},selectChange:function(t){this.selectList=t},handleDeleteList:function(){for(var t=this,e=this.selectList.length,o="",i=0;i<e;i++)o+=this.selectList[i].id+",";o=o.substring(0,o.length-1),console.info(o),this.$confirm("确认删除该宿舍信息吗?","提示",{type:"warning"}).then(function(){t.postRequest("/dormitory/alldormitory/deleteDormitory",{id:o}).then(function(e){e&&200==e.status&&(t.selectList=[],t.getalldormitory())})}).catch(function(){})},handleAdd:function(){this.addandeditFromVisible=!0},handleEdit:function(t,e){this.addandeditFromVisible=!0,this.addandeditFromType="edit",this.addandeditFrom.id=e.id,this.addandeditFrom.dong=e.dong,this.addandeditFrom.floor=e.floor,this.addandeditFrom.room=e.room,this.addandeditFrom.sex=e.sex,this.addandeditFrom.number=e.number,this.addandeditFrom.rent=e.rent},addeditSubmit:function(){var t=this;"edit"==this.addandeditFromType?this.postRequest("/dormitory/alldormitory/updatetDormitory",{id:this.addandeditFrom.id,dong:this.addandeditFrom.dong,floor:this.addandeditFrom.floor,room:this.addandeditFrom.room,sex:this.addandeditFrom.sex,number:this.addandeditFrom.number,rent:this.addandeditFrom.rent}).then(function(e){e&&200==e.status&&t.getalldormitory()}):this.postRequest("/dormitory/alldormitory/insertDormitory",{dong:this.addandeditFrom.dong,floor:this.addandeditFrom.floor,room:this.addandeditFrom.room,sex:this.addandeditFrom.sex,number:this.addandeditFrom.number,rent:this.addandeditFrom.rent}).then(function(e){e&&200==e.status&&t.getalldormitory()})},getstudent:function(t){var e=this;this.dormitoryShowInfoLoading=!0,this.dormitoryShowInfoVisible=!0;var o=this;this.postRequest("/dormitory/alldormitory/getStudentByDormitoryId",{dormitoryId:t.id}).then(function(t){if(t&&200==t.status){console.info(r()(t.data)),o.dormitoryShowInfoLoading=!1;var i=t.data[0],n="";if(i.length>0)for(var a=0;a<i.length;a++)n+=i[a].m.name+i[a].name+"、";n=n.substring(0,n.length-1),e.dormitoryClass=n,e.dormitoryStudent=t.data[1],console.info(r()(t.data[0])+r()(t.data[1]))}})},getAllMajor:function(){var t=this;this.postRequest("/dormitory/alldormitory/getAllMajor",{}).then(function(e){e&&200==e.status&&(t.majorList=e.data)})}},data:function(){return{ddmcForm:{majorId:"",classId:"",dong:"",floor:0,sex:"",number:0,enough:""},dormitoryList:[],dormitoryLoading:!1,classList:[],majorList:[],sexOptions:[{value:"男",label:"男"},{value:"女",label:"女"}],numberOptions:[{label:"2人间",value:2},{label:"3人间",value:3},{label:"4人间",value:4},{label:"5人间",value:5}],enoughOptions:[{value:"1",label:"已安排班级"},{value:"0",label:"未安排班级"}],selectList:[],currentPage:1,pagesize:10,formatnumber:function(t,e){return 2==t.number?"2人间":3==t.number?"3人间":4==t.number?"4人间":5==t.number?"5人间":"未知"},addandeditFromVisible:!1,addandeditFrom:{id:"",dong:"",floor:0,room:0,sex:"",number:0,rent:0},addandeditFromType:"",dormitoryStudent:[],dormitoryClass:"",dormitoryShowInfoLoading:!1,dormitoryShowInfoVisible:!1}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"container"},[o("div",{staticClass:"table"},[o("div",{},[o("el-row",[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"divbuju",staticStyle:{height:"610px"}},[o("el-form",{attrs:{inline:!0,model:t.ddmcForm}},[o("el-form-item",{staticStyle:{width:"100%"}},[t._v("\n                    专业：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},on:{change:t.majorChange},model:{value:t.ddmcForm.majorId,callback:function(e){t.$set(t.ddmcForm,"majorId",e)},expression:"ddmcForm.majorId"}},t._l(t.majorList,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.majorId}})}),1)],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[t._v("\n                    班级：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:t.ddmcForm.classId,callback:function(e){t.$set(t.ddmcForm,"classId",e)},expression:"ddmcForm.classId"}},t._l(t.classList,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.classId}})}),1)],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[t._v("\n                    栋：\n                    "),o("el-input",{staticStyle:{width:"150px",heght:"30px"},attrs:{placeholder:"楼栋编号",size:"mini"},model:{value:t.ddmcForm.dong,callback:function(e){t.$set(t.ddmcForm,"dong",e)},expression:"ddmcForm.dong"}})],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[t._v("\n                    层：\n                    "),o("el-input",{staticStyle:{width:"150px",heght:"30px"},attrs:{placeholder:"楼层数",size:"mini"},model:{value:t.ddmcForm.floor,callback:function(e){t.$set(t.ddmcForm,"floor",t._n(e))},expression:"ddmcForm.floor"}})],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[t._v("\n                    性别：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:t.ddmcForm.sex,callback:function(e){t.$set(t.ddmcForm,"sex",e)},expression:"ddmcForm.sex"}},t._l(t.sexOptions,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[t._v("\n                    几人间：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:t.ddmcForm.number,callback:function(e){t.$set(t.ddmcForm,"number",e)},expression:"ddmcForm.number"}},t._l(t.numberOptions,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[t._v("\n                    宿舍类型：\n                    "),o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:t.ddmcForm.enough,callback:function(e){t.$set(t.ddmcForm,"enough",e)},expression:"ddmcForm.enough"}},t._l(t.enoughOptions,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[o("el-button",{staticStyle:{width:"250px"},attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(e){return t.getalldormitory()}}},[t._v("搜索")])],1)],1)],1)]),t._v(" "),o("el-col",{attrs:{span:18}},[o("div",{staticClass:"divbuju"},[o("el-row",[o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple"},[o("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",round:""},on:{click:t.handleAdd}},[t._v("新增\n                        ")])],1)]),t._v(" "),o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple-light"},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:t.handleDeleteList}},[t._v("删除")])],1)])],1),t._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryLoading,expression:"dormitoryLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.dormitoryList.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":t.selectChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong"}}),t._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor"}}),t._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room"}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex"}}),t._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:t.formatnumber,sortable:""}}),t._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return t.getstudent(e.row)}}},[t._v("查看详情")])]}}])})],1)],t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,40],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.dormitoryList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)])],1)],1)]),t._v(" "),o("el-dialog",{attrs:{title:"新增or修改",visible:t.addandeditFromVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addandeditFromVisible=e}}},[o("el-form",{ref:"addandeditFrom",attrs:{model:t.addandeditFrom,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"栋",prop:"dong"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addandeditFrom.dong,callback:function(e){t.$set(t.addandeditFrom,"dong",e)},expression:"addandeditFrom.dong"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"层",prop:"floor"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addandeditFrom.floor,callback:function(e){t.$set(t.addandeditFrom,"floor",t._n(e))},expression:"addandeditFrom.floor"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"房间",prop:"room"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addandeditFrom.room,callback:function(e){t.$set(t.addandeditFrom,"room",t._n(e))},expression:"addandeditFrom.room"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"sex"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:t.addandeditFrom.sex,callback:function(e){t.$set(t.addandeditFrom,"sex",e)},expression:"addandeditFrom.sex"}},t._l(t.sexOptions,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"几人间",prop:"number"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:t.addandeditFrom.number,callback:function(e){t.$set(t.addandeditFrom,"number",e)},expression:"addandeditFrom.number"}},t._l(t.numberOptions,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"租金/人/年",prop:"rent"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addandeditFrom.rent,callback:function(e){t.$set(t.addandeditFrom,"rent",t._n(e))},expression:"addandeditFrom.rent"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.addandeditFromVisible=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.addeditSubmit}},[t._v("提交")])],1)],1),t._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],attrs:{title:"学生名单",visible:t.dormitoryShowInfoVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dormitoryShowInfoVisible=e}}},[o("div",[t._v("\n      班级："+t._s(t.dormitoryClass)+"\n      "),o("div",[[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.dormitoryStudent,size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[o("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"sb.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"初始学号",prop:"studentId"}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sb.sex"}}),t._v(" "),o("el-table-column",{attrs:{label:"手机号码",prop:"sb.phone"}}),t._v(" "),o("el-table-column",{attrs:{label:"邮箱",prop:"sb.email"}})],1)]],2)]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dormitoryShowInfoVisible=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var s=o("VU/8")(n,a,!1,function(t){o("dqHH")},"data-v-79127d53",null);e.default=s.exports},Dgql:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("mvHQ"),r=o.n(i),n={name:"DorDivideDormitory",created:function(){},mounted:function(){this.initdonglistandclasslist()},methods:{sexChang:function(){this.dormitory.dong="",this.dormitory.floor="",this.initdonglistandclasslist()},initdonglistandclasslist:function(){var t=this,e=this.sexboolean?"男":"女";this.postRequest("/dormitory/alldormitory/getIinsufficientClassDormitoryBySex",{sex:e}).then(function(e){t.classlist=e.data}),this.postRequest("/dormitory/alldormitory/getDormitoryDong",{sex:e}).then(function(e){t.donglist=e.data,""==t.dormitory.dong&&(t.dormitory.dong=t.donglist[0]),t.dongChange()})},dongChange:function(){var t=this;this.postRequest("/dormitory/alldormitory/getDormitoryFloor",{dong:this.dormitory.dong}).then(function(e){t.floorlist=e.data,""==t.dormitory.floor&&(t.dormitory.floor=t.floorlist[0]),t.floorChange()})},floorChange:function(){var t=this;this.postRequest("/dormitory/alldormitory/getallDormitory",{dong:this.dormitory.dong,floor:this.dormitory.floor}).then(function(e){t.dormitorylist=e.data,console.info(r()(t.dormitorylist))})},clickclass:function(t){this.mcname=t.c.m.name+"专业"+t.c.name,this.classId=t.c.classId,this.lessnumber=t.lessnumber},clickdormitory:function(t){var e=this;if(""!=this.lessnumber){var o=t.number-t.hasnumber;if(o>0){var i=0;this.lessnumber>o?(i=o,this.lessnumber=this.lessnumber-o):(i=this.lessnumber,this.mcname="未选择，请点击左侧班级列表选择班级",this.lessnumber=""),this.postRequest("/dormitory/alldormitory/divideDormitory",{classId:this.classId,dormitoryId:t.id,number:i}).then(function(t){e.initdonglistandclasslist()})}else this.$message({message:t.roomname+"宿舍已满员，请重新选择！",type:"warning"})}else this.$message({message:"请先选择左侧班级列表中的班级",type:"warning"})},yjfp:function(){var t=this;this.$confirm("确认一键分配宿舍到班级吗?(此分配为全体学生，不分性别进行分配)","提示",{type:"warning"}).then(function(){t.postRequest("/dormitory/alldormitory/dividedormitory",{}).then(function(e){e&&200==e.status&&t.initdonglistandclasslist()})}).catch(function(){})},mouseoverdiv:function(t){t.show=!0},mouseleavediv:function(t){t.show=!1},getstudent:function(t){var e=this;this.dormitoryShowInfoVisible=!0;this.postRequest("/dormitory/alldormitory/getStudentByDormitoryId",{dormitoryId:t.id}).then(function(t){if(t&&200==t.status){console.info(r()(t.data));var o=t.data[0],i="";if(o.length>0)for(var n=0;n<o.length;n++)i+=o[n].m.name+o[n].name+"、";i=i.substring(0,i.length-1),e.dormitoryClass=i,e.dormitoryStudent=t.data[1],console.info(r()(t.data[0])+r()(t.data[1]))}})},refreshdormitory:function(t){var e=this;this.$confirm("确认重置这宿舍信息吗?这些同学将无宿舍分配哦！请尽快分配！","提示",{type:"warning"}).then(function(){e.postRequest("dormitory/dividedormitory/deletelistDormitoryAllocation",{id:t.id}).then(function(t){t&&200==t.status&&e.initdonglistandclasslist()})}).catch(function(){})}},data:function(){return{sexboolean:!0,dormitory:{dong:"",floor:"",sex:"",number:""},donglist:[],floorlist:[],dormitorylist:[],classlist:[],mcname:"未选择，请点击左侧班级列表选择班级",classId:"",lessnumber:"",dormitoryStudent:[],dormitoryClass:"",dormitoryShowInfoVisible:!1}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("el-row",{staticStyle:{"margin-bottom":"0px"}},[o("el-col",{attrs:{span:3}},[o("el-button",{attrs:{type:"success"},on:{click:t.yjfp}},[t._v("一键分配")])],1),t._v(" "),o("el-col",{attrs:{span:21}},[o("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"男生寝室安排","inactive-text":"女生寝室安排"},on:{change:t.sexChang},model:{value:t.sexboolean,callback:function(e){t.sexboolean=e},expression:"sexboolean"}})],1)],1),t._v(" "),o("div",{staticClass:"divbuju"},[o("div",{staticStyle:{"border-bottom":"2px solid #ddd"}},[o("el-row",{staticStyle:{"margin-bottom":"0px"}},[o("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:4}},[t._v("选择宿舍楼层")]),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-form",{attrs:{inline:!0,model:t.dormitory}},[o("el-form-item",[t._v("\n                选择楼栋：\n                "),o("el-select",{attrs:{placeholder:"请选择学生楼",size:"mini"},on:{change:t.dongChange},model:{value:t.dormitory.dong,callback:function(e){t.$set(t.dormitory,"dong",e)},expression:"dormitory.dong"}},t._l(t.donglist,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),o("el-form-item",[t._v("\n                选择楼层：\n                "),o("el-select",{attrs:{placeholder:"请选择楼层",size:"mini"},on:{change:t.floorChange},model:{value:t.dormitory.floor,callback:function(e){t.$set(t.dormitory,"floor",e)},expression:"dormitory.floor"}},t._l(t.floorlist,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1)],1),t._v(" "),o("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:8}},[t._v("\n            已选择班级："+t._s(t.mcname)+"\n          ")])],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"divbuju",staticStyle:{height:"580px",width:"250px","overflow-y":"auto"}},[o("div",{staticStyle:{"border-bottom":"2px solid #ddd",height:"30px"}},[t._v("\n                  需安排的班级"+t._s(this.sexboolean?"男":"女")+"生人数，请选择\n            ")]),t._v(" "),t._l(t.classlist,function(e){return o("div",[o("el-button",{staticStyle:{width:"250px"},on:{click:function(o){return t.clickclass(e)}}},[t._v(t._s(e.c.m.name)+"专业"+t._s(e.c.name)+t._s(e.lessnumber)+"人")])],1)})],2)]),t._v(" "),o("el-col",{attrs:{span:18}},[o("div",{staticClass:"divbuju",staticStyle:{width:"900px",height:"580px",padding:"auto"}},t._l(t.dormitorylist,function(e){return o("div",{staticStyle:{height:"50px",width:"100px",float:"left",margin:"10px"},on:{mouseover:function(o){return t.mouseoverdiv(e)},mouseleave:function(o){return t.mouseleavediv(e)}}},[o("el-row",{staticStyle:{"margin-bottom":"0px"}},[o("el-col",{attrs:{span:20}},[o("div",{staticClass:"jichudiv",class:{jichudivred:5==e.hasnumber,jichudivgreen:e.hasnumber>0&&e.hasnumber<5},on:{click:function(o){return t.clickdormitory(e)}}},[t._v("\n                  "+t._s(e.roomname)),o("br"),t._v("\n                  "+t._s(e.hasnumber)+" / "+t._s(e.number)+"\n                ")])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"dor.show"}]},[o("el-row",{staticStyle:{"margin-bottom":"0px"}},[o("el-col",[o("div",{staticStyle:{width:"20px",height:"20px","background-color":"#ff0705"}},[o("i",{staticClass:"el-icon-refresh-left",on:{click:function(o){return t.refreshdormitory(e)}}})])])],1),t._v(" "),o("el-row",{staticStyle:{"margin-bottom":"0px"}},[o("el-col",[o("div",{staticStyle:{width:"20px",height:"20px","background-color":"#4bddb1","margin-top":"10px"}},[o("i",{staticClass:"el-icon-search",on:{click:function(o){return t.getstudent(e)}}})])])],1)],1)])],1)],1)}),0)])],1)],1),t._v(" "),o("el-row",{staticStyle:{"margin-bottom":"0px"}},[o("el-col",{attrs:{span:4,offset:12}},[o("div",{staticClass:"jichudivred",staticStyle:{width:"80px",height:"50px",float:"left"}}),t._v(" ：满员宿舍\n    ")]),t._v(" "),o("el-col",{attrs:{span:4}},[o("div",{staticClass:"jichudivgreen",staticStyle:{width:"80px",height:"50px",float:"left"}}),t._v(" ：未满员宿舍\n      ")]),t._v(" "),o("el-col",{attrs:{span:4}},[o("div",{staticStyle:{width:"80px",height:"50px","background-color":"#b6f3ff",float:"left"}}),t._v("：空宿舍\n    ")])],1),t._v(" "),o("el-dialog",{attrs:{title:"分配到的班级及学生",visible:t.dormitoryShowInfoVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dormitoryShowInfoVisible=e}}},[o("div",{staticClass:"divbuju"},[o("div",{staticClass:"divbuju"},[o("el-row",[o("el-col",{attrs:{span:6}},[o("h1",[t._v("分配到的班级：")])]),t._v(" "),o("el-col",{attrs:{span:18}},[o("h1",[t._v(t._s(t.dormitoryClass))])])],1)],1),t._v(" "),o("div",{staticClass:"divbuju"},[o("h1",[t._v("已报到入住学生名单")]),t._v(" "),[o("el-table",{ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.dormitoryStudent,size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[o("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"sb.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"学号",prop:"studentId"}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sb.sex"}}),t._v(" "),o("el-table-column",{attrs:{label:"手机号码",prop:"sb.phone"}}),t._v(" "),o("el-table-column",{attrs:{label:"邮箱",prop:"sb.email"}})],1)]],2)]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dormitoryShowInfoVisible=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var s=o("VU/8")(n,a,!1,function(t){o("SyP4")},"data-v-676ee9ac",null);e.default=s.exports},Lj57:function(t,e){},SyP4:function(t,e){},dqHH:function(t,e){},uSqL:function(t,e,o){var i={"./DorDivideDormitory.vue":"Dgql","./DorDivideDormitoryold.vue":"wiZQ","./DorDormitory.vue":"5VkX"};function r(t){return o(n(t))}function n(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}r.keys=function(){return Object.keys(i)},r.resolve=n,t.exports=r,r.id="uSqL"},wiZQ:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("mvHQ"),r=o.n(i),n={name:"DorDivideDormitoryold",created:function(){this.initTreeData()},methods:{initTreeData:function(){var t=this;this.postRequest("/dormitory/dividedormitory/initTreeData",{}).then(function(e){if(e&&200==e.status){var o=e.data;t.treeData=o,console.info("树"+r()(t.treeData))}})},showdormitory:function(t){var e=this;console.info(t.data),null!=t.data.classId&&(this.classId=t.data.classId,this.grade=t.data.grade,this.dormitoryLoading=!0,this.postRequest("/dormitory/dividedormitory/getallDormitory",{classId:t.data.classId}).then(function(t){if(t&&200==t.status){var o=t.data;console.info(r()(o)),e.dormitoryList=o[0],e.classInfo=o[1],e.dormitoryLoading=!1,console.info(r()(e.classInfo))}}))},handleSizeChange:function(t){this.pagesize=t,console.log(this.pagesize)},handleCurrentChange:function(t){this.currentPage=t,console.log(this.currentPage)},indexMethod:function(t){return t+1},boyhandleSizeChange:function(t){this.boypagesize=t,console.log(this.boypagesize)},boyhandleCurrentChange:function(t){this.boycurrentPage=t,console.log(this.boycurrentPage)},girlhandleSizeChange:function(t){this.girlpagesize=t,console.log(this.girlpagesize)},girlhandleCurrentChange:function(t){this.girlcurrentPage=t,console.log(this.girlcurrentPage)},selectChange:function(t){this.selectList=t},blessselectChange:function(t){this.blessselectList=t},bhandleDeleteList:function(){for(var t=this,e=this.blessselectList.length,o="",i=0;i<e;i++)o+=this.blessselectList[i].id+",";""!=(o=o.substring(0,o.length-1))&&(console.info(o),this.$confirm("确认删除这宿舍信息吗?这些同学将无宿舍分配哦！请尽快分配！","提示",{type:"warning"}).then(function(){t.postRequest("dormitory/dividedormitory/deletelistDormitoryAllocation",{id:o}).then(function(e){e&&200==e.status&&(t.bselectList=[],t.handleAdd())})}).catch(function(){}))},glessselectChange:function(t){this.glessselectList=t},ghandleDeleteList:function(){for(var t=this,e=this.glessselectList.length,o="",i=0;i<e;i++)o+=this.glessselectList[i].id+",";""!=(o=o.substring(0,o.length-1))&&(console.info(o),this.$confirm("确认删除这宿舍信息吗?这些同学将无宿舍分配哦！请尽快分配！","提示",{type:"warning"}).then(function(){t.postRequest("dormitory/dividedormitory/deletelistDormitoryAllocation",{id:o}).then(function(e){e&&200==e.status&&(t.gselectList=[],t.handleAdd())})}).catch(function(){}))},gneedselectChange:function(t){this.gneedselectList=t},bneedselectChange:function(t){this.bneedselectList=t},handleDeleteList:function(){for(var t=this,e=this.selectList.length,o="",i=0;i<e;i++)o+=this.selectList[i].id+",";""!=(o=o.substring(0,o.length-1))&&(console.info(o),this.$confirm("确认删除这宿舍信息吗?这些同学将无宿舍分配哦！请尽快分配！","提示",{type:"warning"}).then(function(){t.postRequest("dormitory/dividedormitory/deletelistDormitoryAllocation",{id:o}).then(function(e){e&&200==e.status&&(t.selectList=[],t.getalldormitory())})}).catch(function(){}))},getstudent:function(t){var e=this;this.dormitoryShowInfoLoading=!0,this.dormitoryShowInfoVisible=!0;var o=this;this.postRequest("/dormitory/alldormitory/getStudentByDormitoryId",{dormitoryId:t.id}).then(function(t){if(t&&200==t.status){console.info(r()(t.data)),o.dormitoryShowInfoLoading=!1;var i=t.data[0],n="";if(i.length>0)for(var a=0;a<i.length;a++)n+=i[a].m.name+i[a].name+"、";n=n.substring(0,n.length-1),e.dormitoryClass=n,e.dormitoryStudent=t.data[1],console.info(r()(t.data[0])+r()(t.data[1]))}})},
//!!!!!!!!!!!!!!!!!!!自动分配宿舍
dividedormitory:function(){var t=this;this.$confirm("确认自动分配宿舍到班级吗?","提示",{type:"warning"}).then(function(){t.postRequest("/dormitory/alldormitory/dividedormitory",{}).then(function(t){t&&t.status})}).catch(function(){})},handleAdd:function(){var t=this;this.addDormitoryforClassFromLoading=!0,this.addDormitoryforClassFromVisible=!0,this.postRequest("/dormitory/dividedormitory/getIinsufficientDormitory",{}).then(function(e){e&&200==e.status&&(t.boyinsufficientDormitory=e.data[0],t.girlinsufficientDormitory=e.data[1],console.info(r()(e.data)),t.getIinsufficientClassDormitory(),t.addDormitoryforClassFromLoading=!1)})},getIinsufficientClassDormitory:function(){var t=this;this.postRequest("/dormitory/dividedormitory/getIinsufficientClassDormitory",{}).then(function(e){e&&200==e.status&&(t.bclassdormitort=e.data[0],t.gclassdormitort=e.data[1],console.info(r()(t.bclassdormitort)),console.info(r()(t.gclassdormitort)),console.info(r()(e.data)))})},boyneedhandleSizeChange:function(t){this.boyneedpagesize=t,console.log(this.boyneedpagesize)},boyneedhandleCurrentChange:function(t){this.boyneedcurrentPage=t,console.log(this.boyneedcurrentPage)},girlneedhandleSizeChange:function(t){this.girlneedpagesize=t,console.log(this.girlneedpagesize)},girlneedhandleCurrentChange:function(t){this.girlneedcurrentPage=t,console.log(this.girlneedcurrentPage)},badddormitory:function(t){for(var e=this,o=this.bneedselectList.length,i="",n=0;n<o;n++)i+=this.bneedselectList[n].c.m.name+this.bneedselectList[n].c.name+":"+this.bneedselectList[n].c.classId+":"+this.bneedselectList[n].boylessnumber+",";if(i=i.substring(0,i.length-1),console.info(i+r()(this.bneedselectList)),""!=i){var a=t.number-t.hasnumber;this.$confirm("该宿舍最多再容纳"+a+"人，请确认是否添加新生","提示",{type:"warning"}).then(function(){e.postRequest("dormitory/dividedormitory/addDormitoryAllocation",{id:t.id,dong:t.dong,floor:t.floor,room:t.room,sex:t.sex,number:t.number,rent:t.rent,hasnumber:t.hasnumber,daid:i}).then(function(t){t&&200==t.status&&(e.bneedselectList=[],e.handleAdd())})}).catch(function(){})}else this.$message({message:"请先从右侧列表中选择要加入的班级学生",type:"error"})},gadddormitory:function(t){for(var e=this,o=this.gneedselectList.length,i="",r=0;r<o;r++)i+=this.gneedselectList[r].c.m.name+this.gneedselectList[r].c.name+":"+this.gneedselectList[r].c.classId+":"+this.gneedselectList[r].girllessnumber+",";if(i=i.substring(0,i.length-1),console.info(i),""!=i){var n=t.number-t.hasnumber;this.$confirm("该宿舍最多再容纳"+n+"人，请确认是否添加新生","提示",{type:"warning"}).then(function(){e.postRequest("dormitory/dividedormitory/addDormitoryAllocation",{id:t.id,dong:t.dong,floor:t.floor,room:t.room,sex:t.sex,number:t.number,rent:t.rent,hasnumber:t.hasnumber,daid:i}).then(function(t){t&&200==t.status&&(e.gneedselectList=[],e.handleAdd())})}).catch(function(){})}else this.$message({message:"请先从右侧列表中选择要加入的班级学生",type:"error"})},gaddnewDormitory:function(){var t=this;if(0!==this.gclassdormitort.length){var e="以下新生都会被安排到新的宿舍";0!==this.girlinsufficientDormitory.length&&(e="还有未满员的宿舍！确定安排新宿舍吗?"+e),this.$confirm(e,"提示",{type:"warning"}).then(function(){for(var e=t.gclassdormitort.length,o="",i=0;i<e;i++)o+=t.gclassdormitort[i].c.m.name+t.gclassdormitort[i].c.name+":"+t.gclassdormitort[i].c.classId+":"+t.gclassdormitort[i].girllessnumber+",";o=o.substring(0,o.length-1),console.info(o),t.postRequest("dormitory/dividedormitory/addNewDormitoryAllocation",{info:o,sex:"女"}).then(function(e){t.gneedselectList=[],t.handleAdd()})}).catch(function(){})}else this.$message({message:"暂无需要宿舍的学生！不需要安排新宿舍！",type:"error"})},baddnewDormitory:function(){var t=this;if(0!==this.bclassdormitort.length){var e="以下新生都会被安排到新的宿舍";0!==this.boyinsufficientDormitory.length&&(e="还有未满员的宿舍！确定安排新宿舍吗?"+e),this.$confirm(e,"提示",{type:"warning"}).then(function(){for(var e=t.bclassdormitort.length,o="",i=0;i<e;i++)o+=t.bclassdormitort[i].c.m.name+t.bclassdormitort[i].c.name+":"+t.bclassdormitort[i].c.classId+":"+t.bclassdormitort[i].boylessnumber+",";o=o.substring(0,o.length-1),console.info(o),t.postRequest("dormitory/dividedormitory/addNewDormitoryAllocation",{info:o,sex:"男"}).then(function(e){t.bneedselectList=[],t.handleAdd()})}).catch(function(){})}else this.$message({message:"暂无需要宿舍的学生！不需要安排新宿舍！",type:"error"})},presteps:function(){this.stepsactive>0&&(this.stepsactive--,1==this.stepsactive&&this.handleAdd())},nextsteps:function(){this.stepsactive<2&&(this.stepsactive++,1==this.stepsactive&&this.handleAdd())}},data:function(){return{treeData:[],defaultProps:{children:"children",label:"name"},dormitoryList:[],dormitoryLoading:!1,classInfo:{majorname:"",majorId:"",classId:"",classname:"",boynumber:"",girlnumber:"",boydormitorynumber:"",girldormitorynumber:""},grade:"",selectList:[],currentPage:1,pagesize:10,formatnumber:function(t,e){return 2==t.number?"2人间":3==t.number?"3人间":4==t.number?"4人间":5==t.number?"5人间":"未知"},dormitoryStudent:[],dormitoryClass:"",dormitoryShowInfoLoading:!1,dormitoryShowInfoVisible:!1,classId:"",addDormitoryforClassFromLoading:!1,addDormitoryforClassFromVisible:!1,boyinsufficientDormitory:[],girlinsufficientDormitory:[],blessselectList:[],glessselectList:[],bclassdormitort:[],gclassdormitort:[],bneedselectList:[],gneedselectList:[],boycurrentPage:1,boypagesize:5,girlcurrentPage:1,girlpagesize:5,boyneedcurrentPage:1,boyneedpagesize:5,girlneedcurrentPage:1,girlneedpagesize:5,stepsactive:0,isred:!1,isgreen:!0}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"container"},[o("div",{staticClass:"divbuju"},[o("div",[o("el-steps",{attrs:{active:t.stepsactive,"align-center":""}},[o("el-step",{attrs:{title:"一、自动划分宿舍"}}),t._v(" "),o("el-step",{attrs:{title:"二、手动调整未满员宿舍"}}),t._v(" "),o("el-step",{attrs:{title:"三、查看班级分配情况"}})],1)],1),t._v(" "),o("el-button",{attrs:{icon:"el-icon-back"},on:{click:t.presteps}},[t._v("上一步")]),t._v(" "),o("el-button",{attrs:{icon:"el-icon-right"},on:{click:t.nextsteps}},[t._v("下一步")])],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.stepsactive,expression:"stepsactive==0"}],staticClass:"divbuju",staticStyle:{height:"500px"}},[o("div",{staticStyle:{"margin-top":"10px","margin-right":"20px"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",size:"mini",round:""},on:{click:t.dividedormitory}},[t._v("分配宿舍\n          ")])],1)],1)],1),t._v(" "),o("div",{staticClass:"jichudiv",class:{jichudivred:!t.isred,jichudivgreen:!t.isgreen}})]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:1==t.stepsactive,expression:"stepsactive==1"}],staticClass:"grid-content bg-purple"},[o("div",{staticClass:"divbuju"},[o("div",[o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"男生未满员宿舍管理"}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:t.bhandleDeleteList}},[t._v("解散宿舍\n                ")])],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:16}},[[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.boyinsufficientDormitory.slice((t.boycurrentPage-1)*t.boypagesize,t.boycurrentPage*t.boypagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":t.blessselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),o("el-table-column",{attrs:{type:"index",index:t.indexMethod,width:"35"}}),t._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong",sortable:"",width:"70"}}),t._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor",sortable:"",width:"70"}}),t._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room",sortable:"",width:"70"}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex",width:"50"}}),t._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:t.formatnumber,sortable:"",width:"100"}}),t._v(" "),o("el-table-column",{attrs:{label:"已分配",prop:"hasnumber",sortable:"",width:"90"}}),t._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent",width:"90"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return t.getstudent(e.row)}}},[t._v("查看详情")]),t._v(" "),o("el-button",{attrs:{type:"success",size:"small"},on:{click:function(o){return t.badddormitory(e.row)}}},[t._v("选择班级")])]}}])})],1)],t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("el-pagination",{attrs:{"current-page":t.boycurrentPage,"page-sizes":[5,10,20,40],"page-size":t.boypagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.boyinsufficientDormitory.length},on:{"size-change":t.boyhandleSizeChange,"current-change":t.boyhandleCurrentChange}})],2),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini",round:""},on:{click:t.baddnewDormitory}},[t._v("分配新宿舍\n                    ")])],1)],1),t._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable1",staticClass:"el-tb-edit mgt20",attrs:{data:t.bclassdormitort.slice((t.boyneedcurrentPage-1)*t.boyneedpagesize,t.boyneedcurrentPage*t.boyneedpagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":t.bneedselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"缺少床位",prop:"boylessnumber",sortable:""}})],1)],t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("el-pagination",{attrs:{"current-page":t.boyneedcurrentPage,"page-sizes":[5,10,20,40],"page-size":t.boyneedpagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.bclassdormitort.length},on:{"size-change":t.boyneedhandleSizeChange,"current-change":t.boyneedhandleCurrentChange}})],2)],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:"女生未满员宿舍管理"}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:t.ghandleDeleteList}},[t._v("解散宿舍\n                ")])],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:16}},[[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.girlinsufficientDormitory.slice((t.girlcurrentPage-1)*t.girlpagesize,t.girlcurrentPage*t.girlpagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":t.glessselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),o("el-table-column",{attrs:{type:"index",index:t.indexMethod,width:"35"}}),t._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong",sortable:"",width:"70px"}}),t._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor",sortable:"",width:"70px"}}),t._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room",sortable:"",width:"70px"}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex",width:"50px"}}),t._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:t.formatnumber,sortable:"",width:"100px"}}),t._v(" "),o("el-table-column",{attrs:{label:"已分配）",prop:"hasnumber",sortable:"",width:"100px"}}),t._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent",width:"90px"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return t.getstudent(e.row)}}},[t._v("查看详情")]),t._v(" "),o("el-button",{attrs:{type:"success",size:"small"},on:{click:function(o){return t.gadddormitory(e.row)}}},[t._v("选择班级")])]}}])})],1)],t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("el-pagination",{attrs:{"current-page":t.girlcurrentPage,"page-sizes":[5,10,20,40],"page-size":t.girlpagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.girlinsufficientDormitory.length},on:{"size-change":t.girlhandleSizeChange,"current-change":t.girlhandleCurrentChange}})],2),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini",round:""},on:{click:t.gaddnewDormitory}},[t._v("分配新宿舍\n                    ")])],1)],1),t._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.addDormitoryforClassFromLoading,expression:"addDormitoryforClassFromLoading"}],ref:"multipleTable1",staticClass:"el-tb-edit mgt20",attrs:{data:t.gclassdormitort.slice((t.girlneedcurrentPage-1)*t.girlneedpagesize,t.girlneedcurrentPage*t.girlneedpagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":t.gneedselectChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"缺少床位",prop:"girllessnumber",sortable:""}})],1)],t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("el-pagination",{attrs:{"current-page":t.girlneedcurrentPage,"page-sizes":[5,10,20,40],"page-size":t.girlneedpagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.gclassdormitort.length},on:{"size-change":t.girlneedhandleSizeChange,"current-change":t.girlneedhandleCurrentChange}})],2)],1)],1)],1)],1)])]),t._v(" "),o("el-row",{directives:[{name:"show",rawName:"v-show",value:2==t.stepsactive,expression:"stepsactive==2"}]},[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"divbuju",staticStyle:{height:"600px"}},[o("el-row",[o("el-col",[t._v("请选择班级")])],1),t._v(" "),o("el-tree",{staticStyle:{"margin-left":"20%"},attrs:{data:t.treeData,props:t.defaultProps,accordion:"","node-key":"id","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node;return e.data,o("span",{staticClass:"custom-tree-node"},[o("span",[o("i",{on:{click:function(e){return t.showdormitory(i)}}},[t._v(t._s(i.label))])])])}}])})],1)]),t._v(" "),o("el-col",{attrs:{span:18}},[o("div",{staticClass:"divbuju",staticStyle:{height:"600px","overflow-y":"auto"}},[""!=t.classInfo.majorname?o("div",[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("span",{staticStyle:{color:"#ff27e8"}},[t._v(t._s(t.classInfo.majorname)+"专业："+t._s(t.classInfo.classname))])]),t._v(" "),o("el-col",{attrs:{span:8}},[t._v("\n              班级男生床位/人数："),o("span",{staticStyle:{color:"#27ff14"}},[t._v(t._s(t.classInfo.boydormitorynumber)+" ")]),t._v(" / "+t._s(t.classInfo.boynumber)+"\n            ")]),t._v(" "),o("el-col",{attrs:{span:8}},[t._v("\n              女生床位/人数："),o("span",{staticStyle:{color:"#27ff14"}},[t._v(" "+t._s(t.classInfo.girldormitorynumber))]),t._v(" / "+t._s(t.classInfo.girlnumber)+"\n            ")])],1)],1):t._e(),t._v(" "),o("el-row",[o("el-col",[o("el-row",[o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple-light"},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:t.handleDeleteList}},[t._v("删除\n                  ")])],1)])],1),t._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryLoading,expression:"dormitoryLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.dormitoryList.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"},on:{"selection-change":t.selectChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),o("el-table-column",{attrs:{label:"栋",prop:"dong"}}),t._v(" "),o("el-table-column",{attrs:{label:"层",prop:"floor"}}),t._v(" "),o("el-table-column",{attrs:{label:"房间",prop:"room"}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sex"}}),t._v(" "),o("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:t.formatnumber,sortable:""}}),t._v(" "),o("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"分配详情",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{plain:"",size:"small"},on:{click:function(o){return t.getstudent(e.row)}}},[t._v("查看详情")])]}}])})],1)],t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,40],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.dormitoryList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)],1)],1)])],1),t._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],attrs:{title:"分配到的班级及学生",visible:t.dormitoryShowInfoVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dormitoryShowInfoVisible=e}}},[o("div",{staticClass:"divbuju"},[o("div",{staticClass:"divbuju"},[o("el-row",[o("el-col",{attrs:{span:6}},[o("h1",[t._v("分配到的班级：")])]),t._v(" "),o("el-col",{attrs:{span:18}},[o("h1",[t._v(t._s(t.dormitoryClass))])])],1)],1),t._v(" "),o("div",{staticClass:"divbuju"},[o("h1",[t._v("已报到入住学生名单")]),t._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryShowInfoLoading,expression:"dormitoryShowInfoLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.dormitoryStudent,size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[o("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),o("el-table-column",{attrs:{label:"专业",prop:"c.m.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"班级",prop:"c.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"sb.name"}}),t._v(" "),o("el-table-column",{attrs:{label:"学号",prop:"studentId"}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"sb.sex"}}),t._v(" "),o("el-table-column",{attrs:{label:"手机号码",prop:"sb.phone"}}),t._v(" "),o("el-table-column",{attrs:{label:"邮箱",prop:"sb.email"}})],1)]],2)]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dormitoryShowInfoVisible=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var s=o("VU/8")(n,a,!1,function(t){o("Lj57")},"data-v-13d39a08",null);e.default=s.exports}});
//# sourceMappingURL=5.557ff14f60d14f6dea98.js.map