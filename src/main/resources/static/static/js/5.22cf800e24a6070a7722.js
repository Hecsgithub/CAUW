webpackJsonp([5],{"7Gcb":function(t,e,s){var a={"./HeaClass.vue":"sWqQ","./HeaClassNotice.vue":"bAVu"};function n(t){return s(o(t))}function o(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(a)},n.resolve=o,t.exports=n,n.id="7Gcb"},bAVu:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"divbuju",staticStyle:{height:"600px"}},[s("el-row",[s("el-col",{attrs:{span:16}},[t._v("\n          正在管理的班级\n        ")])],1),t._v(" "),s("el-tree",{attrs:{data:t.treeData,props:t.defaultProps,"node-key":"id","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node;return e.data,s("span",{staticClass:"custom-tree-node"},[s("span",[s("i",{on:{click:function(e){return t.getclassnotice(a)}}},[t._v(t._s(a.label))])])])}}])})],1)]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"divbuju",staticStyle:{height:"600px","overflow-y":"auto"}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",round:""},on:{click:function(e){return t.iauclassnotice(null,"insert")}}},[t._v("新增通知")])],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",round:""},on:{click:function(e){return t.deleteclassnotice(null,"all")}}},[t._v("全部删除")])],1)],1),t._v(" "),0!=t.classnotice.length?s("div",t._l(t.classnotice,function(e){return s("div",{staticClass:"divbuju"},[s("el-row",[s("el-col",{attrs:{span:20}},[s("el-row",[s("el-col",[t._v(t._s(e.noticeWord))])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6,offset:18}},[t._v(t._s(e.time))])],1)],1),t._v(" "),s("el-col",{attrs:{span:4}},[s("el-row",[s("el-col",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(s){return t.iauclassnotice(e,"update")}}})],1)],1),t._v(" "),s("el-row",[s("el-col",[s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(s){return t.deleteclassnotice(e,"sgin")}}})],1)],1)],1)],1)],1)}),0):s("div",[s("h1",[t._v("该班级暂无通知，请点击上方新增通知！")])])],1)])],1),t._v(" "),s("el-dialog",{attrs:{title:"新增或修改通知",visible:t.classnoticeFromVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.classnoticeFromVisible=e}}},[s("el-form",{ref:"sgincn",attrs:{model:t.sgincn,"label-width":"80px",inline:!0}},[s("el-form-item",{attrs:{label:"通知",prop:"noticeWord"}},[s("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",rows:3,placeholder:"请输入内容","auto-complete":"off",clearable:""},model:{value:t.sgincn.noticeWord,callback:function(e){t.$set(t.sgincn,"noticeWord",e)},expression:"sgincn.noticeWord"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.classnoticeFromVisible=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{on:{click:t.submitiauclassnotice}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var n=s("VU/8")({name:"HeaClassNotice",created:function(){},mounted:function(){this.inittreeDataByUsers()},methods:{inittreeDataByUsers:function(){var t=this;this.getRequest("/headmaster/initTreeDataByHeadmaster").then(function(e){e&&200==e.status&&(t.treeData=e.data)})},getclassnotice:function(t){var e=this,s="";s=null==t?this.sgincn.classId:t.data.classId,this.sgincn.classId=s,this.postRequest("/headmaster/getClassNotice",{classId:s}).then(function(t){t&&200==t.status&&(e.classnotice=t.data)})},iauclassnotice:function(t,e){""!=this.sgincn.classId?(this.type=e,"update"==e&&(this.sgincn.id=t.id,this.sgincn.noticeWord=t.noticeWord),this.classnoticeFromVisible=!0):this.$message({message:"请先选择班级！",type:"warning"})},deleteclassnotice:function(t,e){var s=this;if(""!=this.sgincn.classId){var a="";if("sgin"===e)a=t.id;else{for(var n=0;n<this.classnotice.length;n++)a+=this.classnotice[n].id+",";a=a.substring(0,a.length-1)}this.$confirm("确认删除该通知吗?","提示",{type:"warning"}).then(function(){s.postRequest("/headmaster/deletelistclassnotice",{id:a}).then(function(t){t&&200==t.status&&s.getclassnotice()})}).catch(function(){})}else this.$message({message:"请先选择班级！",type:"warning"})},submitiauclassnotice:function(){var t=this;this.postRequest("/headmaster/iauClassNotice",{id:this.sgincn.id,noticeWord:this.sgincn.noticeWord,classId:this.sgincn.classId,type:this.type}).then(function(e){e&&200==e.status&&(t.sgincn.noticeWord="",t.getclassnotice(),t.classnoticeFromVisible=!1)})}},data:function(){return{treeData:[],defaultProps:{children:"children",label:"name"},classnotice:[],type:"",classnoticeFromVisible:!1,sgincn:{id:"",classId:"",noticeWord:""}}}},a,!1,function(t){s("bRR7")},"data-v-4f87bd0c",null);e.default=n.exports},bRR7:function(t,e){},o4LR:function(t,e){},sWqQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("ARhN"),n=s.n(a),o=(s("Ir7r"),{name:"HeaClass",created:function(){},mounted:function(){this.inittreeDataByUsers()},methods:{inittreeDataByUsers:function(){var t=this;this.getRequest("/headmaster/initTreeDataByHeadmaster").then(function(e){e&&200==e.status&&(t.treeData=e.data)})},getStudent:function(t){var e=this;this.classsname=t.data.name,this.postRequest("/headmaster/getClassStudent",{classId:t.data.classId}).then(function(s){s&&200==s.status&&(e.studentList=s.data,e.getTJ(t))})},handleSizeChange:function(t){this.pagesize=t,console.log(this.pagesize)},handleCurrentChange:function(t){this.currentPage=t,console.log(this.currentPage)},indexMethod:function(t){return t+1},showdormitory:function(t){var e=this;this.dormitoryFormVisible=!0,this.dormitoryFormLoading=!0,this.postRequest("/headmaster/getStudentDormitory",{studentId:t.studentId}).then(function(t){t&&200==t.status&&(e.dormitory=t.data,e.dormitoryFormLoading=!1)})},getTJ:function(t){var e=this;this.postRequest("/headmaster/selectallstudentbasicTJ",{classId:t.data.classId}).then(function(t){e.personnumberdata=t.data[0],e.numbersum=t.data[1],e.report=t.data[2],e.noresportstudent=t.data[3],e.chinaConfigure(),e.ringConfigure()})},chinaConfigure:function(){var t=n.a.init(document.getElementById("myEchart"));window.onresize=t.resize;var e={backgroundColor:"#02AFDB",tooltip:{},dataRange:{show:!1,min:0,max:1e3,text:["High","Low"],realtime:!0,calculable:!0,color:["orangered","yellow","lightskyblue"]},geo:{map:"china",roam:!0,label:{normal:{show:!0,textStyle:{color:"rgba(0,0,0,0.4)"}}},itemStyle:{normal:{borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:null,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:20,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},series:[{type:"scatter",coordinateSystem:"geo"},{name:"学生人数",type:"map",geoIndex:0,data:this.personnumberdata}]};t.setOption(e)},ringConfigure:function(){var t=n.a.init(document.getElementById("myRingEchart"));window.onresize=t.resize;var e={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:["已报到","未报到"]},series:[{name:"报到情况",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:this.report}]};t.setOption(e)},shownoresportstudent:function(){this.noresportstudentFromVisible=!0}},data:function(){return{treeData:[],defaultProps:{children:"children",label:"name"},studentList:[],studentLoading:!1,currentPage:1,pagesize:5,dormitory:[],dormitoryFormLoading:!1,dormitoryFormVisible:!1,formatnumber:function(t,e){return 2==t.number?"2人间":3==t.number?"3人间":4==t.number?"4人间":5==t.number?"5人间":"未知"},personnumberdata:[],numbersum:"",classsname:"",report:[],noresportstudent:[],noresportstudentFromVisible:!1}}}),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"container"},[s("div",{staticClass:"divbuju"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"divbuju",staticStyle:{height:"600px"}},[s("el-row",[s("el-col",{attrs:{span:16}},[t._v("\n            正在管理的班级\n          ")])],1),t._v(" "),s("el-tree",{attrs:{data:t.treeData,props:t.defaultProps,"node-key":"id","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node;return e.data,s("span",{staticClass:"custom-tree-node"},[s("span",[s("i",{on:{click:function(e){return t.getStudent(a)}}},[t._v(t._s(a.label))])])])}}])})],1)]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"divbuju",staticStyle:{height:"600px","overflow-y":"auto"}},[[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.studentLoading,expression:"studentLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.studentList.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[s("el-table-column",{attrs:{type:"index",index:t.indexMethod,width:"35"}}),t._v(" "),s("el-table-column",{attrs:{label:"姓名",prop:"sb.name",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{label:"学号",prop:"studentId",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{label:"性别",prop:"sb.sex",width:"45"}}),t._v(" "),s("el-table-column",{attrs:{label:"手机号码",prop:"sb.phone",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{label:"邮箱",prop:"sb.email",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{label:"身份证号",prop:"sb.idNumber",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{label:"监护人联系号码",prop:"sb.parentPhone",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{label:"地址",prop:"sb.adress",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{plain:"",size:"small"},on:{click:function(s){return t.showdormitory(e.row)}}},[t._v("查看宿舍")])]}}])})],1)],t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,40],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.studentList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"divbuju"},[s("h1",[t._v(t._s(t.classsname)+"新生国内分布图 本班新生共"+t._s(t.numbersum)+"人")]),t._v(" "),s("div",{style:{height:"400px",width:"100%"},attrs:{id:"myEchart"}})])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"divbuju"},[s("h1",[t._v(t._s(t.classsname)+"新生报到统计图 本班新生共"+t._s(t.numbersum)+"人 "),s("el-button",{staticStyle:{color:"#9bff23"},attrs:{type:"text"},on:{click:t.shownoresportstudent}},[t._v("查看未报到")])],1),t._v(" "),s("div",{style:{height:"400px",width:"100%"},attrs:{id:"myRingEchart"}})])])],1)],1),t._v(" "),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryFormLoading,expression:"dormitoryFormLoading"}],attrs:{title:"学生宿舍",visible:t.dormitoryFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dormitoryFormVisible=e}}},[s("div",[s("div",[[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryFormLoading,expression:"dormitoryFormLoading"}],ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.dormitory,size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[s("el-table-column",{attrs:{label:"栋",prop:"dong"}}),t._v(" "),s("el-table-column",{attrs:{label:"层",prop:"floor"}}),t._v(" "),s("el-table-column",{attrs:{label:"房间",prop:"room"}}),t._v(" "),s("el-table-column",{attrs:{label:"性别",prop:"sex"}}),t._v(" "),s("el-table-column",{attrs:{label:"几人间",prop:"number",formatter:t.formatnumber,sortable:""}}),t._v(" "),s("el-table-column",{attrs:{label:"费用/人/年）",prop:"rent"}})],1)]],2)]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dormitoryFormVisible=!1}}},[t._v("确定")])],1)]),t._v(" "),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dormitoryFormLoading,expression:"dormitoryFormLoading"}],attrs:{title:"未报到学生",visible:t.noresportstudentFromVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.noresportstudentFromVisible=e}}},[s("div",[s("div",[[s("el-table",{ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:t.noresportstudent,size:"mini","highlight-current-row":"",border:"","tooltip-effect":"dark"}},[s("el-table-column",{attrs:{type:"index"}}),t._v(" "),s("el-table-column",{attrs:{label:"姓名",prop:"sb.name"}}),t._v(" "),s("el-table-column",{attrs:{label:"性别",prop:"sb.sex"}}),t._v(" "),s("el-table-column",{attrs:{label:"手机号码",prop:"sb.phone"}}),t._v(" "),s("el-table-column",{attrs:{label:"身份证",prop:"sb.idNumber"}}),t._v(" "),s("el-table-column",{attrs:{label:"邮箱",prop:"sb.email"}}),t._v(" "),s("el-table-column",{attrs:{label:"家长手机",prop:"sb.parentPhone"}}),t._v(" "),s("el-table-column",{attrs:{label:"地址",prop:"sb.adress"}})],1)]],2)]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.noresportstudentFromVisible=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var r=s("VU/8")(o,i,!1,function(t){s("o4LR")},"data-v-38d465e4",null);e.default=r.exports}});
//# sourceMappingURL=5.22cf800e24a6070a7722.js.map